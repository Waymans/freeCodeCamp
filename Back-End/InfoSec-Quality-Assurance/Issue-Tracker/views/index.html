<!DOCTYPE html>
<html>
  <head>
    <title>Issue Tracker</title>
    <meta name="description" content="A cool thing made with Glitch">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="stylesheet" href="/public/style.css">-->
    <link rel="stylesheet" 
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" 
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" 
          crossorigin="anonymous">
  </head>
  <body class="bg-light">
    <div class="bg"></div>
    
    <!-- Submit -->
    <section class="container p-0">
      <header class="text-center">
        <h1 >Issue Tracker</h1>
      </header>
      <label>New issue:</label>
      <form id="testForm">
        <div class="row m-0">
          <div class="col-sm p-0">
            <div class="input-group">
              <input type="text" class="form-control" name="issue_title" placeholder="*Title" required>
            </div>
      	  <div class="col-sm p-0">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Assigned to" name="assigned_to">
            </div>
          </div>
        </div>
        <div class="col-sm p-0">
          <div class="input-group">
            <input type="text" class="form-control" name="created_by" placeholder="*Created by" required>
          </div>
        	<div class="col-sm p-0">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Status text" name="status_text">
            </div>
          </div>
        </div>
          <div class="col-sm p-0">
            <div class="input-group">
              <textarea class="form-control" name="issue_text" placeholder="*Text" required></textarea>
            </div>
          </div>
        </div>  
        <button type="submit" class="btn btn-block btn-outline-success">Submit</button>
      </form>
      <hr>
    </section>
    
    <!-- Update -->
    <section class="container p-0">
      <label>Update issue:</label>
      <form id="testForm2">   
      <div class="row m-0">
        <div class="col-sm p-0"> 
          <div class="input-group">
            <input type="text" class="form-control" placeholder="*_id" name="_id" required>
          </div>
      	  <div class="col-sm p-0">
            <div class="input-group">
              <div class="custom-control custom-switch form-control">
                <input type="checkbox" class="custom-control-input" id="switch1" name="open" value="false">
                <label class="custom-control-label ml-2" for="switch1">Toggle to close issue</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm p-0">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Title" name="issue_title">
          </div>
      	  <div class="col-sm p-0">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Assigned to" name="assigned_to">
            </div>
          </div>
        </div>
        <div class="col-sm p-0">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Created by" name="created_by">
          </div>
        	<div class="col-sm p-0">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Status text" name="status_text">
            </div>
          </div>
        </div>
          <div class="col-sm p-0">
            <div class="input-group">
              <textarea class="form-control" name="issue_text" rows="2" placeholder="Text"></textarea>
            </div>
          </div>
        </div>  
      <button type="submit" class="btn btn-block btn-outline-success">Submit</button>
      </form>
      <hr>
    </section>
    
    <!-- Delete -->
    <section class="container p-0">
      <label>Delete issue:</label>
      <form id="testForm3">
        <div class="input-group input-group" >
          <div class="input-group-prepend" >
            <span class="input-group-text">*_id</span>
          </div>
          <input type="text" name="_id" class="form-control" required>
          <div class="input-group-append">
    	      <button class="btn btn-outline-danger" type="submit">Delete</button>
  	      </div>
        </div>
      </form>
      <hr>
    </section>
    
    <!-- Result -->
    <section class="container p-0">
      <h5>Result: <code id="jsonResult"></code></h5>
      <footer>
        <h5 id="projects"></h5>
        <hr>
        <button type="button" class="btn btn-block btn-outline-info" data-toggle="modal" data-target="#myModal">
          User Stories
        </button>
      </footer> 
    </section>
    
    <!-- The Modal -->
    <section class="container">
      <div class="modal fade" id="myModal"> 
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <header class="modal-header">
              <h4 class="modal-title">User Stories</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </header>
            <div class="modal-body">
              <section id="userstories">
                <ol>
                  <li>Prevent cross site scripting(XSS attack).</li>
                  <li>I can <b>POST</b> <code>/api/issues/{projectname}</code> with form data containing required <i>issue_title</i>, <i>issue_text</i>, <i>created_by</i>, and optional <i>assigned_to</i> and <i>status_text</i>.</li>
                  <li>The object saved (and returned) will include all of those fields (blank for optional no input) and also include <i>created_on</i>(date/time), <i>updated_on</i>(date/time), <i>open</i>(boolean, true for open, false for closed), and <i>_id</i>.</li>
                  <li>I can <b>PUT</b> <code>/api/issues/{projectname}</code> with a <i>_id</i> and any fields in the object with a value to object said object. Returned will be 'successfully updated' or 'could not update '+_id. This should always update <i>updated_on</i>. If no fields are sent return 'no updated field sent'.</li>
                  <li>I can <b>DELETE</b> <code>/api/issues/{projectname}</code> with a <i>_id</i> to completely delete an issue. If no _id is sent return '_id error', success: 'deleted '+_id, failed: 'could not delete '+_id.</li>
                  <li>I can <b>GET</b> <code>/api/issues/{projectname}</code> for an array of all issues on that specific project with all the information for each issue as was returned when posted.</li>
                  <li>I can filter my get request by also passing along any field and value in the query(ie. <code>/api/issues/{project}?open=false</code>). I can pass along as many fields/values as I want.</li>
                  <li>All 11 functional tests are complete and passing.</li>
                </ol>
                <br>
                <h3>Example get usage:</h3>
                <code>/api/issues/{project}</code><br>
                <code>/api/issues/{project}?open=true&amp;assigned_to=Joe</code><br>
                <h3>Example return:</h3>
                <code>[{"_id":"5871dda29faedc3491ff93bb", "issue_title":"Fix error in posting data", "issue_text":"When we post data it has an error.", "created_on":"2017-01-08T06:35:14.240Z", "updated_on":"2017-01-08T06:35:14.240Z", "created_by":"Joe", "assigned_to":"Joe", "open":true, "status_text":"In QA"},...]</code>
              </section>
            </div>
            <footer class="modal-footer">
              <p>Check out my other projects on <a href="https://github.com/Waymans" target="_blank">Github</a>.</p>
              <button type="button" class="btn btn-lg btn-danger" data-dismiss="modal">Close</button>
            </footer>
          </div>
        </div>
      </div>
    </section>
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
		        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" 
            integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" 
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" 
            integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" 
            crossorigin="anonymous"></script>
    <script src="/public/index.js"></script>
  </body>
</html>